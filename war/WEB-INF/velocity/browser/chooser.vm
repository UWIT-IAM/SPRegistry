#* ========================================================================
 * Copyright (c) 2009-2013 The University of Washington
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 *#

## sp registry webservice (main page)

#parse ( 'definitions.vm' )

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
 <title>SP Registry</title>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-config="async: true"></script>
  <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/tundra/tundra.css"/>
  <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/resources/dojo.css"/>

<link rel="stylesheet" type="text/css" href="/gws.css"/>

  <!--[if IE]>
    <link rel="stylesheet" type="text/css" href="/iam-ie.css" />
  <![endif]-->

<script type="text/javascript" src="/sr.js"></script>

<script>
    require(["dojo/dom",
     "dojo/parser",
     "dijit/MenuBar",
     "dijit/Menu",
     "dijit/MenuItem",
     "dijit/Dialog",
     "dijit/TooltipDialog",
     "dijit/PopupMenuBarItem",
     "dijit/form/Button",
     "dijit/form/RadioButton",
     "dijit/form/DropDownButton",
     "dijit/form/CheckBox",
     "dijit/form/TextBox",
     "dijit/form/Textarea",
     "dijit/form/Select",
     "dijit/form/SimpleTextarea",
     "dijit/layout/ContentPane",
     "dijit/layout/TabContainer",
     "dijit/layout/BorderContainer",
     "dojo/domReady!"], function(dom,parser) {
       parser.parse();
       onLoad();
 });

</script>


<script>
v_root='$root';
v_vers='$vers';
v_remoteUser='$remote_user';
v_xsrf = '${xsrf}';


require(["dojo/_base/Deferred", "dojo/_base/xhr", "dojo/_base/array", "dojo/dom-construct", "dojo/dom", "dojo/domReady!"]);

function redirectToLogin(path) {
   var url = '$root' + '$vers' + path + '$pathextra';
   document.location = url;
}

</script>
</head>

<body class="tundra" id="documentbody">

## banner popups and menus

<div id="helpAbout" dojoType="dijit.Dialog" title="About" $hide>
   Identity and Access Management
<br/>
Service Provider Registry 2.0.0
<br/>
Revision 11/19/2012
</div>

<div id="helpLogin" dojoType="dijit.Dialog" title="Log in" $hide>
etc.
<p>
<ul>
</ul>
<p>
</div>


## page
## loader flash
<div id="theflash" dojoType="dijit.layout.ContentPane" style="width: 100%; height:100%">
<div style="width: 100%; height:50%">
</div>
<div align="center"><img src="/circle_loader.gif">
</div>
</div>


<div id="thepage" dojoType="dijit.layout.BorderContainer"  gutters="false" liveSplitters="true" style="width: 100%; height: 100%">

## banner
<div id="banner" class="container" dojoType="dijit.layout.ContentPane" region="top" splitter="false">
    <span id="logo"><a href="javascript:showHomePanel()" title="University of Washington"><img src="/UWw.gif" alt="UW" /></a></span>
    <span id="title"><a href="javascript:showHomePanel()">Service Provider Registry</a></span>
    <ul id="navigation">

        <li>$!{notice}</li>
        <li>
        <div dojoType="dijit.form.DropDownButton">
            <span>
                Log in
            </span>
           <div data-dojo-type="dijit.Menu" id="loginMenu">
               <div data-dojo-type="dijit.MenuItem" data-dojo-props="onClick:function(){redirectToLogin('$uwloginpath');}">
                UW NetID
               </div>
               <div data-dojo-type="dijit.MenuItem" data-dojo-props="onClick:function(){redirectToLogin('$googleloginpath');}">
                Google
               </div>
               <div data-dojo-type="dijit.MenuItem" data-dojo-props="onClick:function(){redirectToLogin('$incommonloginpath');}">
                InCommon
               </div>
           </div>
        </div>
        </li>
        <li>
        <div dojoType="dijit.form.DropDownButton">
            <span>
                Help
            </span>
           <div data-dojo-type="dijit.Menu" id="helpMenu">
               <div data-dojo-type="dijit.MenuItem" data-dojo-props="onClick:function(){dijit.byId('helpLogin').show();}">
                Log in
               </div>
               <div data-dojo-type="dijit.MenuItem" data-dojo-props="onClick:function(){dijit.byId('helpAbout').show();}">
                About the registry
               </div>
           </div>
        </div>
        </li>
    </ul>

</div>  ## banner containe

<script>

  function onLoad() {
   require(["dojo/dom", "dijit/registry", "dojo/domReady!"], function(dom, registry) {

// drop the flash and show the page
   dom.byId('theflash').style.display = 'none';
   dom.byId('thepage').style.display = '';
   dom.byId('thepage').style.width = '100%';
   dom.byId('thepage').style.height = '100%';
   registry.byId('thepage').layout();
   registry.byId('thepage').resize();

   });
}

</script>



<div id="groupsDisplay" dojoType="dijit.layout.ContentPane" region="left" splitter="true" minSize="100">

 <div id="groupsPane" dojoType="dijit.layout.ContentPane" style="overflow:hidden" >

  <div id="groupsTitlebar">
    <div class="groupsLeft">
       <span id="myGroupsTitle">Please login</span>
    </div>
  </div>


  <div class="groupList" id="myGroupsPanel" dojoType="dijit.layout.ContentPane"
         onLoad="adjustMGPaneSize()"  style="overflow:auto">

   The Service Provider Registry needs to know who you are before you can continue.
  <hr/>

     People with UW NetIDs should choose Weblogin.
     <p>
     If you log in with your Google account your Google gmail account
     will be your login identity.
       <p>If you login with an InCommon affiliate, such as another university, your ePPN
     will be your login identity.

  </div>

 </div>
</div>



## right side

<div id="homeDisplay" dojoType="dijit.layout.ContentPane"  region="center" splitter="true" style="margin-top:6px;overflow:auto;" >
#set ($vm = "${pagetype}.vm")
#parse ( $vm )

 </div>




## footer

<div dojoType="dijit.layout.ContentPane" region="bottom" splitter="false">

<div id="footer" dojoType="dijit.layout.ContentPane">
    <span id="footlogo"><a href="http:/www.uw.edu/" title="University of Washington"><img src="/uofw-small.gif" alt="UW" /></a></span>
    <span id="footcenter">
    <ul id="navigation">
        <li><a href="mailto:help@uw.edu">CONTACT US</a></li>
        <li><a href="http://www.washington.edu/online/privacy/">PRIVACY</a></li>
        <li><a href="http://www.washington.edu/online/terms/">TERMS</a></li>
    </ul>
    </span>
    <span id="footright">
    <ul id="navigation">
        <li>UW Information Technology</li>
    </ul>
    </span>
</div>

</div>
</div>
</body>
</html>

