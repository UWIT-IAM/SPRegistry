#* ========================================================================
 * Copyright (c) 2012 The University of Washington
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 *#

#parse ( 'definitions.vm' )


<div id="groupViewPane" dojoType="dijit.layout.ContentPane" doLayout="false" style="overflow:auto;" >

  <div id="groupViewLinks" class="tabbox" dojoType="dijit.layout.ContentPane" doLayout="false">
  <ul>
  #if ($canEdit && $relyingParty.editable)
  <li class="sublist" >Actions:</li>
  <li class="sublist" ><a href="javascript:handleGroupEditBtn()">Edit</a>
##        <button id="geditbtn" dojoType="dijit.form.Button" type="button" class="subButton"
##         onClick="handleGroupEditBtn()">
##         Edit
##        </button>
   </li>
  #end
  </ul>
  </div>

<table class="iamtable">

    <tr><th colspan="3">General information</th></tr>
    <tr><td class="label">Id</td>
         <td colspan="2">${relyingParty.entityId}</td></tr>
    
    <tr><th colspan="3">Organization</th></tr>
    #set ( $org = $relyingParty.organization )
    #if ( $org.name )
    <tr><td class="label">Name</td>
         <td colspan="2">$org.name</td></tr>
    #end
    #if ( $org.displayName )
    <tr><td class="label">Display</td>
         <td colspan="2">$org.displayName</td></tr>
    #end
    #if ( $org.url )
    <tr><td class="label">url</td>
         <td colspan="2">$org.url</td></tr>
    #end

    <tr><th colspan="3">Contacts</th></tr>
   #foreach ( $ct in $relyingParty.contactPersons )
     <tr>
      <td class="label">Type:</td><td colspan="2">$!ct.type</td>
     </tr>
     #if ( $ct.givenName || $ct.surName )
     <tr>
      <td class="label">Name:</td><td colspan="2">$!ct.givenName $!ct.surName</td>
     </tr>
     #end
     #if ( $ct.company )
     <tr>
      <td class="label">Company:</td><td colspan="2">$!ct.company</td>
     </tr>
     #end
     #if ( $ct.email )
     <tr>
      <td class="label">Email:</td><td colspan="2">$!ct.email</td>
     </tr>
     #end
     #if ( $ct.phone )
     <tr>
      <td class="label">Phone:</td><td colspan="2">$!ct.phone</td>
     </tr>
     #end
   #end


    <tr><th colspan="3">Metadata details</th></tr>
         
<tr>
 <td class="optionbot" align="left" colspan="99">
     <span id="rpvshowDetail"><a href="javascript:showDetail('rpv')">Show</a></span>
     <span id="rpvhideDetail" ${hide} ><a href="javascript:hideDetail('rpv')">Hide</a></span>
 </td>
</tr>
   
     <tr><td id="rpvmessyDetail" colspan="3" ${hide} >

       <table >

   ## ProtocolSupportEnumerations
      <tr><td class="grouplabel">Protocols</td></tr>
   
   #foreach ( $ps in $relyingParty.protocolSupportEnumerations )
     <tr> 
      <td class="groupitem" colspan="2">$ps</td>
     </tr>
   #end

   ## KeyInfo

      <tr><td class="grouplabel">KeyInfo</td></tr>
   #foreach ( $key in $relyingParty.keyDescriptors )
      <tr>
      <td class="groupitem" align="left">Name:</td>
        <td>$!key.keyName</td>
      </tr>
#*
      #if ( $key.use )
      <tr><td class="rplabel" align="left" valign="top"></td>
      <td class="rplabel" align="left">Use:</td>
        <td class="rptext">$!key.use</td>
      </tr>
      #end
 *#
      #if ( $key.certificate )
      <tr>
      <td class="groupitem" align="left" valign="top">Cert:</td>
         <td><div class="certbox">$key.certificate</div></td>
      </tr>
      #end
   #end


   ## Nameid

      <tr><td class="grouplabel">NameId</td></tr>
   #foreach ( $name in $relyingParty.nameIDFormats )
     <tr>
      <td class="groupitem" colspan="2">$name"</td>
     </tr>
   #end


   ## ACS

      <tr><td class="grouplabel" colspan="99" nowrap="nowrap">Assertion Consumer Service Locations</td></tr>
   #foreach ( $acs in $relyingParty.assertionConsumerServices )
     <tr>
      <td class="groupitem" align="left" >$acs.index</td>
             <td nowrap="nowrap">$acs.binding</td>
     </tr>
     <tr>
      <td class="groupitem" align="left" ></td>
             <td nowrap="nowrap"><tt>$acs.location</tt></td>
     </tr>
   #end


   </table></td></tr>



</table>


</div>
