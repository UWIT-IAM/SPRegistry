#* ========================================================================
 * Copyright (c) 2011-2013 The University of Washington
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 *#

#parse ( 'definitions.vm' )

#if ($isAdmin)
#parse ( "browser/attr_edit.vm" )
#end
#if ($canEdit || $newEntity)
#parse ( "browser/attr_req.vm" )
#end

<div id="attrSpContainer" dojoType="dijit.layout.ContentPane" title="Attributes" selected="false" style="overflow:hidden"
   onClose="return(true)" doLayout="false" >

  <div id="attrSpActions" class="tabbox" dojoType="dijit.layout.ContentPane" doLayout="false" >
  <ul>
  <li class="sublist" >Actions:</li>
  #if ($canEdit || $newEntity)
  <li class="sublist" ><a id="attrReqLink" tabindex="0" role="button" aria-label="request attributes" 
       href="javascript:iam_showTheDialog('attrReqDialog',['sp/attrlib']);"><span style="text-decoration: underline">R</span>equest_attributes</a></li>
  #end
  #if ($isAdmin)
  <li class="sublist" ><a id="attrEditLink" tabindex="0" role="button" aria-label="edit attributes"
       href="javascript:iam_showTheDialog('attrEditDialog',['sp/attrlib']);"><span style="text-decoration: underline">E</span>dit</a></li>
  #end
  </ul>
  </div>


<div id="attrSpPane" tabindex="0" dojoType="dijit.layout.ContentPane" doLayout="false" style="overflow:auto;" onShow="adjustSpPaneSize('attr')" >

<table class="iamtable">

 
  #foreach ( $attr in $attributes )

   #if ($attr.attributeFilterPolicy )
      <tr><td class="label" title="$!{attr.description}">$!{attr.id}</td>
      #set ($ar = $attr.attributeRule)
      #foreach ( $value in $ar.valueRules )
         #if ( $value.type == "basic:ANY" )
          <td>All values</td></tr>
         #else
           #set ($c=0)
           #foreach ( $rule in $value.rules )
             #if ($c>0)
               <tr><td></td>
             #end
             <td>#if ($rule.regex)<span class="subtitle">(regex)</span>#end ${rule.value}</td></tr>
             #set ($c = $c + 1)
           #end
         #end
      #end ## value
   #end  ## fpolicy

 #end  ## attrs


 </table>

## error and status messages
<div id="requestStatusDiv" class="notice" $hide>&nbsp; 
</div>
<div class="status">$!{status}
</div>


</div>

</div>  

